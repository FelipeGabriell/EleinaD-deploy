!function(){"use strict";function a(a){if(void 0===a)throw new Error("Pathformer [constructor]: \"element\" parameter is required");if(a.constructor===String&&!(a=document.getElementById(a)))throw new Error("Pathformer [constructor]: \"element\" parameter is not related to an existing ID");if(!(a instanceof window.SVGElement||a instanceof window.SVGGElement||/^svg$/i.test(a.nodeName)))throw new Error("Pathformer [constructor]: \"element\" parameter must be a string or a SVGelement");this.el=a,this.scan(a)}function b(a,b,d){c(),this.isReady=!1,this.setElement(a,b),this.setOptions(b),this.setCallback(d),this.isReady&&this.init()}var c,d,f,g;a.prototype.TYPES=["line","ellipse","circle","polygon","polyline","rect"],a.prototype.ATTR_WATCH=["cx","cy","points","r","rx","ry","x","x1","x2","y","y1","y2"],a.prototype.scan=function(b){for(var c,d,f,g=b.querySelectorAll(this.TYPES.join(",")),h=0;h<g.length;h++)d=(0,this[(c=g[h]).tagName.toLowerCase()+"ToPath"])(this.parseAttr(c.attributes)),f=this.pathMaker(c,d),c.parentNode.replaceChild(f,c)},a.prototype.lineToPath=function(b){var c={},d=b.x1||0,e=b.y1||0,f=b.x2||0,g=b.y2||0;return c.d="M"+d+","+e+"L"+f+","+g,c},a.prototype.rectToPath=function(b){var c={},d=parseFloat(b.x)||0,e=parseFloat(b.y)||0,f=parseFloat(b.width)||0,g=parseFloat(b.height)||0;if(b.rx||b.ry){var a=parseInt(b.rx,10)||-1,h=parseInt(b.ry,10)||-1;a=Math.min(Math.max(0>a?h:a,0),f/2),h=Math.min(Math.max(0>h?a:h,0),g/2),c.d="M "+(d+a)+","+e+" L "+(d+f-a)+","+e+" A "+a+","+h+",0,0,1,"+(d+f)+","+(e+h)+" L "+(d+f)+","+(e+g-h)+" A "+a+","+h+",0,0,1,"+(d+f-a)+","+(e+g)+" L "+(d+a)+","+(e+g)+" A "+a+","+h+",0,0,1,"+d+","+(e+g-h)+" L "+d+","+(e+h)+" A "+a+","+h+",0,0,1,"+(d+a)+","+e}else c.d="M"+d+" "+e+" L"+(d+f)+" "+e+" L"+(d+f)+" "+(e+g)+" L"+d+" "+(e+g)+" Z";return c},a.prototype.polylineToPath=function(b){var c,d,f={},g=b.points.trim().split(" ");if(-1===b.points.indexOf(",")){var h=[];for(c=0;c<g.length;c+=2)h.push(g[c]+","+g[c+1]);g=h}for(d="M"+g[0],c=1;c<g.length;c++)-1!==g[c].indexOf(",")&&(d+="L"+g[c]);return f.d=d,f},a.prototype.polygonToPath=function(b){var c=a.prototype.polylineToPath(b);return c.d+="Z",c},a.prototype.ellipseToPath=function(b){var c={},d=parseFloat(b.rx)||0,e=parseFloat(b.ry)||0,f=parseFloat(b.cx)||0,g=parseFloat(b.cy)||0,a=f-d,i=parseFloat(f)+parseFloat(d),h=g;return c.d="M"+a+","+g+"A"+d+","+e+" 0,1,1 "+i+","+h+"A"+d+","+e+" 0,1,1 "+a+","+h,c},a.prototype.circleToPath=function(b){var c={},d=parseFloat(b.r)||0,e=parseFloat(b.cx)||0,f=parseFloat(b.cy)||0,g=e-d,a=parseFloat(e)+parseFloat(d),i=f;return c.d="M"+g+","+f+"A"+d+","+d+" 0,1,1 "+a+","+i+"A"+d+","+d+" 0,1,1 "+g+","+i,c},a.prototype.pathMaker=function(a,b){var c,d,e=document.createElementNS("http://www.w3.org/2000/svg","path");for(c=0;c<a.attributes.length;c++)d=a.attributes[c],-1===this.ATTR_WATCH.indexOf(d.name)&&e.setAttribute(d.name,d.value);for(c in b)e.setAttribute(c,b[c]);return e},a.prototype.parseAttr=function(a){for(var b,c={},d=0;d<a.length;d++){if(b=a[d],-1!==this.ATTR_WATCH.indexOf(b.name)&&-1!==b.value.indexOf("%"))throw new Error("Pathformer [parseAttr]: a SVG shape got values in percentage. This cannot be transformed into 'path' tags. Please use 'viewBox'.");c[b.name]=b.value}return c},b.LINEAR=function(a){return a},b.EASE=function(a){return-Math.cos(a*Math.PI)/2+.5},b.EASE_OUT=function(a){return 1-Math.pow(1-a,3)},b.EASE_IN=function(a){return Math.pow(a,3)},b.EASE_OUT_BOUNCE=function(a){var b=1-Math.cos(a*(.5*Math.PI)),c=Math.pow(b,1.5),d=Math.pow(1-a,2);return 1-d+(1-Math.abs(Math.cos(c*(2.5*Math.PI))))*d},b.prototype.setElement=function(a,b){var c,d;if(void 0===a)throw new Error("Vivus [constructor]: \"element\" parameter is required");if(a.constructor===String&&!(a=document.getElementById(a)))throw new Error("Vivus [constructor]: \"element\" parameter is not related to an existing ID");if(this.parentEl=a,b&&b.file){d=this,c=function(){var a=document.createElement("div");a.innerHTML=this.responseText;var c=a.querySelector("svg");if(!c)throw new Error("Vivus [load]: Cannot find the SVG in the loaded file : "+b.file);d.el=c,d.el.setAttribute("width","100%"),d.el.setAttribute("height","100%"),d.parentEl.appendChild(d.el),d.isReady=!0,d.init(),d=null};var f=new window.XMLHttpRequest;return f.addEventListener("load",c),f.open("GET",b.file),void f.send()}switch(a.constructor){case window.SVGSVGElement:case window.SVGElement:case window.SVGGElement:this.el=a,this.isReady=!0;break;case window.HTMLObjectElement:d=this,(c=function(b){if(!d.isReady){if(d.el=a.contentDocument&&a.contentDocument.querySelector("svg"),!d.el&&b)throw new Error("Vivus [constructor]: object loaded does not contain any SVG");d.el&&(a.getAttribute("built-by-vivus")&&(d.parentEl.insertBefore(d.el,a),d.parentEl.removeChild(a),d.el.setAttribute("width","100%"),d.el.setAttribute("height","100%")),d.isReady=!0,d.init(),d=null)}})()||a.addEventListener("load",c);break;default:throw new Error("Vivus [constructor]: \"element\" parameter is not valid (or miss the \"file\" attribute)");}},b.prototype.setOptions=function(a){var c=["delayed","sync","async","nsync","oneByOne","scenario","scenario-sync"],d=["inViewport","manual","autostart"];if(void 0!==a&&a.constructor!==Object)throw new Error("Vivus [constructor]: \"options\" parameter must be an object");if((a=a||{}).type&&-1===c.indexOf(a.type))throw new Error("Vivus [constructor]: "+a.type+" is not an existing animation `type`");if(this.type=a.type||c[0],a.start&&-1===d.indexOf(a.start))throw new Error("Vivus [constructor]: "+a.start+" is not an existing `start` option");if(this.start=a.start||d[0],this.isIE=-1!==window.navigator.userAgent.indexOf("MSIE")||-1!==window.navigator.userAgent.indexOf("Trident/")||-1!==window.navigator.userAgent.indexOf("Edge/"),this.duration=g(a.duration,120),this.delay=g(a.delay,null),this.dashGap=g(a.dashGap,1),this.forceRender=a.hasOwnProperty("forceRender")?!!a.forceRender:this.isIE,this.reverseStack=!!a.reverseStack,this.selfDestroy=!!a.selfDestroy,this.onReady=a.onReady,this.map=[],this.frameLength=this.currentFrame=this.delayUnit=this.speed=this.handle=null,this.ignoreInvisible=!!a.hasOwnProperty("ignoreInvisible")&&!!a.ignoreInvisible,this.animTimingFunction=a.animTimingFunction||b.LINEAR,this.pathTimingFunction=a.pathTimingFunction||b.LINEAR,this.delay>=this.duration)throw new Error("Vivus [constructor]: delay must be shorter than duration")},b.prototype.setCallback=function(a){if(a&&a.constructor!==Function)throw new Error("Vivus [constructor]: \"callback\" parameter must be a function");this.callback=a||function(){}},b.prototype.mapping=function(){var b,d,f,j,k,m,p,q,v,w;for(q=m=p=0,d=this.el.querySelectorAll("path"),w=!1,b=0;b<d.length;b++)if(f=d[b],!this.isInvisible(f)){if(k={el:f,length:0,startAt:0,duration:0,isResizeSensitive:!1},"non-scaling-stroke"===f.getAttribute("vector-effect")){var x=f.getBoundingClientRect(),c=f.getBBox();v=Math.max(x.width/c.width,x.height/c.height),w=k.isResizeSensitive=!0}else v=1;k.length=Math.ceil(f.getTotalLength()*v),isNaN(k.length)?window.console&&console.warn&&console.warn("Vivus [mapping]: cannot retrieve a path element length",f):(this.map.push(k),f.style.strokeDasharray=k.length+" "+(k.length+2*this.dashGap),f.style.strokeDashoffset=k.length+this.dashGap,k.length+=this.dashGap,m+=k.length,this.renderPath(b))}for(w&&console.warn("Vivus: this SVG contains non-scaling-strokes. You should call instance.recalc() when the SVG is resized or you will encounter unwanted behaviour. See https://github.com/maxwellito/vivus#non-scaling for more info."),m=0===m?1:m,this.delay=null===this.delay?this.duration/3:this.delay,this.delayUnit=this.delay/(1<d.length?d.length-1:1),this.reverseStack&&this.map.reverse(),b=0;b<this.map.length;b++){switch(k=this.map[b],this.type){case"delayed":k.startAt=this.delayUnit*b,k.duration=this.duration-this.delay;break;case"oneByOne":k.startAt=p/m*this.duration,k.duration=k.length/m*this.duration;break;case"sync":case"async":case"nsync":k.startAt=0,k.duration=this.duration;break;case"scenario-sync":f=k.el,j=this.parseAttr(f),k.startAt=q+(g(j["data-delay"],this.delayUnit)||0),k.duration=g(j["data-duration"],this.duration),q=void 0===j["data-async"]?k.startAt+k.duration:k.startAt,this.frameLength=Math.max(this.frameLength,k.startAt+k.duration);break;case"scenario":f=k.el,j=this.parseAttr(f),k.startAt=g(j["data-start"],this.delayUnit)||0,k.duration=g(j["data-duration"],this.duration),this.frameLength=Math.max(this.frameLength,k.startAt+k.duration);}p+=k.length,this.frameLength=this.frameLength||this.duration}},b.prototype.recalc=function(){this.mustRecalcScale||(this.mustRecalcScale=d(function(){this.performLineRecalc()}.bind(this)))},b.prototype.performLineRecalc=function(){for(var b,c,d,f,g,h=0;h<this.map.length;h++)(b=this.map[h]).isResizeSensitive&&(d=(c=b.el).getBoundingClientRect(),f=c.getBBox(),g=Math.max(d.width/f.width,d.height/f.height),b.length=Math.ceil(c.getTotalLength()*g),c.style.strokeDasharray=b.length+" "+(b.length+2*this.dashGap));this.trace(),this.mustRecalcScale=null},b.prototype.draw=function(){var a=this;if(this.currentFrame+=this.speed,0>=this.currentFrame)this.stop(),this.reset();else{if(!(this.currentFrame>=this.frameLength))return this.trace(),void(this.handle=d(function(){a.draw()}));this.stop(),this.currentFrame=this.frameLength,this.trace(),this.selfDestroy&&this.destroy()}this.callback(this),this.instanceCallback&&(this.instanceCallback(this),this.instanceCallback=null)},b.prototype.trace=function(){var a,b,c,d;for(d=this.animTimingFunction(this.currentFrame/this.frameLength)*this.frameLength,a=0;a<this.map.length;a++)b=(d-(c=this.map[a]).startAt)/c.duration,b=this.pathTimingFunction(Math.max(0,Math.min(1,b))),c.progress!==b&&(c.progress=b,c.el.style.strokeDashoffset=Math.floor(c.length*(1-b)),this.renderPath(a))},b.prototype.renderPath=function(a){if(this.forceRender&&this.map&&this.map[a]){var b=this.map[a],c=b.el.cloneNode(!0);b.el.parentNode.replaceChild(c,b.el),b.el=c}},b.prototype.init=function(){this.frameLength=0,this.currentFrame=0,this.map=[],new a(this.el),this.mapping(),this.starter(),this.onReady&&this.onReady(this)},b.prototype.starter=function(){switch(this.start){case"manual":return;case"autostart":this.play();break;case"inViewport":var a=this,b=function(){a.isInViewport(a.parentEl,1)&&(a.play(),window.removeEventListener("scroll",b))};window.addEventListener("scroll",b),b();}},b.prototype.getStatus=function(){return 0===this.currentFrame?"start":this.currentFrame===this.frameLength?"end":"progress"},b.prototype.reset=function(){return this.setFrameProgress(0)},b.prototype.finish=function(){return this.setFrameProgress(1)},b.prototype.setFrameProgress=function(a){return a=Math.min(1,Math.max(0,a)),this.currentFrame=Math.round(this.frameLength*a),this.trace(),this},b.prototype.play=function(a,b){if(this.instanceCallback=null,a&&"function"==typeof a)this.instanceCallback=a,a=null;else if(a&&"number"!=typeof a)throw new Error("Vivus [play]: invalid speed");return b&&"function"==typeof b&&!this.instanceCallback&&(this.instanceCallback=b),this.speed=a||1,this.handle||this.draw(),this},b.prototype.stop=function(){return this.handle&&(f(this.handle),this.handle=null),this},b.prototype.destroy=function(){var a,b;for(this.stop(),a=0;a<this.map.length;a++)(b=this.map[a]).el.style.strokeDashoffset=null,b.el.style.strokeDasharray=null,this.renderPath(a)},b.prototype.isInvisible=function(a){var b,c=a.getAttribute("data-ignore");return null===c?!!this.ignoreInvisible&&!(b=a.getBoundingClientRect()).width&&!b.height:"false"!==c},b.prototype.parseAttr=function(a){var b,c={};if(a&&a.attributes)for(var d=0;d<a.attributes.length;d++)c[(b=a.attributes[d]).name]=b.value;return c},b.prototype.isInViewport=function(b,c){var d=this.scrollY(),f=d+this.getViewportH(),g=b.getBoundingClientRect(),h=g.height,a=d+g.top;return a+h*(c=c||0)<=f&&d<=a+h},b.prototype.getViewportH=function(){var a=this.docElem.clientHeight,b=window.innerHeight;return a<b?b:a},b.prototype.scrollY=function(){return window.pageYOffset||this.docElem.scrollTop},c=function(){b.prototype.docElem||(b.prototype.docElem=window.document.documentElement,d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},f=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a)})},g=function(a,b){var c=parseInt(a,10);return 0<=c?c:b},"function"==typeof define&&define.amd?define([],function(){return b}):"object"==typeof exports?module.exports=b:window.Vivus=b}();
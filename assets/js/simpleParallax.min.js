!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("simpleParallax",[],b):"object"==typeof exports?exports.simpleParallax=b():a.simpleParallax=b()}(window,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(j,k,e){"use strict";function q(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function n(a){return function(a){if(Array.isArray(a))return o(a)}(a)||function(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}(a)||function(a,b){if(a){if("string"==typeof a)return o(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?o(a,b):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function h(a){return function(a){if(Array.isArray(a))return d(a)}(a)||function(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}(a)||p(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,c){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(b)){var d,e=[],f=!0,g=!1;try{for(var h,j=b[Symbol.iterator]();!(f=(h=j.next()).done)&&(e.push(h.value),!c||e.length!==c);f=!0);}catch(a){g=!0,d=a}finally{try{f||null==j.return||j.return()}finally{if(g)throw d}}return e}}(a,b)||p(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(a,b){if(a){if("string"==typeof a)return d(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?d(a,b):void 0}}function d(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function u(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}e.r(k),e.d(k,"default",function(){return A});var v,t,y=function(){return Element.prototype.closest&&"IntersectionObserver"in window},i=new(function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.positions={top:0,bottom:0,height:0}}var b,c,d;return b=a,(c=[{key:"setViewportTop",value:function(a){return this.positions.top=a?a.scrollTop:window.pageYOffset,this.positions}},{key:"setViewportBottom",value:function(){return this.positions.bottom=this.positions.top+this.positions.height,this.positions}},{key:"setViewportAll",value:function(a){return this.positions.top=a?a.scrollTop:window.pageYOffset,this.positions.height=a?a.clientHeight:document.documentElement.clientHeight,this.positions.bottom=this.positions.top+this.positions.height,this.positions}}])&&q(b.prototype,c),d&&q(b,d),a}()),s=function(a){return NodeList.prototype.isPrototypeOf(a)||HTMLCollection.prototype.isPrototypeOf(a)?Array.from(a):"string"==typeof a||a instanceof String?document.querySelectorAll(a):[a]},r=function(){for(var a,b=["transform","webkitTransform","mozTransform","oTransform","msTransform"],c=0;void 0===a;)a=void 0===document.createElement("div").style[b[c]]?void 0:b[c],c+=1;return a}(),a=function(a){return"video"===a.tagName.toLowerCase()||!!a&&!!a.complete&&(void 0===a.naturalWidth||0!==a.naturalWidth)},l=function(){function b(c,d){var e=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),this.element=c,this.elementContainer=c,this.settings=d,this.isVisible=!0,this.isInit=!1,this.oldTranslateValue=-1,this.init=this.init.bind(this),a(c)?this.init():this.element.addEventListener("load",function(){setTimeout(function(){e.init(!0)},50)})}var d,f,g;return d=b,(f=[{key:"init",value:function(a){var b=this;this.isInit||(a&&(this.rangeMax=null),this.element.closest(".simpleParallax")||(!1===this.settings.overflow&&this.wrapElement(this.element),this.setTransformCSS(),this.getElementOffset(),this.intersectionObserver(),this.getTranslateValue(),this.animate(),0<this.settings.delay&&setTimeout(function(){b.setTransitionCSS()},10),this.isInit=!0))}},{key:"wrapElement",value:function(){var a=this.settings.customWrapper&&this.element.closest(this.settings.customWrapper),b=this.element.closest("picture")||this.element,c=document.createElement("div");a&&(c=this.element.closest(this.settings.customWrapper)),c.classList.add("simpleParallax"),c.style.overflow="hidden",a||(b.parentNode.insertBefore(c,b),c.appendChild(b)),this.elementContainer=c}},{key:"unWrapElement",value:function(){var a=this.elementContainer;this.settings.customWrapper&&this.element.closest(this.settings.customWrapper)?(a.classList.remove("simpleParallax"),a.style.overflow=""):a.replaceWith.apply(a,n(a.childNodes))}},{key:"setTransformCSS",value:function(){!1===this.settings.overflow&&(this.element.style[r]="scale(".concat(this.settings.scale,")")),this.element.style.willChange="transform"}},{key:"setTransitionCSS",value:function(){this.element.style.transition="transform ".concat(this.settings.delay,"s ").concat(this.settings.transition)}},{key:"unSetStyle",value:function(){this.element.style.willChange="",this.element.style[r]="",this.element.style.transition=""}},{key:"getElementOffset",value:function(){var a=this.elementContainer.getBoundingClientRect();if(this.elementHeight=a.height,this.elementTop=a.top+i.positions.top,this.settings.customContainer){var b=this.settings.customContainer.getBoundingClientRect();this.elementTop=a.top-b.top+i.positions.top}this.elementBottom=this.elementHeight+this.elementTop}},{key:"buildThresholdList",value:function(){for(var a,b=[],c=1;c<=this.elementHeight;c++)a=c/this.elementHeight,b.push(a);return b}},{key:"intersectionObserver",value:function(){var a={root:null,threshold:this.buildThresholdList()};this.observer=new IntersectionObserver(this.intersectionObserverCallback.bind(this),a),this.observer.observe(this.element)}},{key:"intersectionObserverCallback",value:function(a){var b=this;a.forEach(function(a){b.isVisible=!!a.isIntersecting})}},{key:"checkIfVisible",value:function(){return this.elementBottom>i.positions.top&&this.elementTop<i.positions.bottom}},{key:"getRangeMax",value:function(){var a=this.element.clientHeight;this.rangeMax=a*this.settings.scale-a}},{key:"getTranslateValue",value:function(){var a=((i.positions.bottom-this.elementTop)/((i.positions.height+this.elementHeight)/100)).toFixed(1);return a=Math.min(100,Math.max(0,a)),0!==this.settings.maxTransition&&a>this.settings.maxTransition&&(a=this.settings.maxTransition),this.oldPercentage!==a&&(this.rangeMax||this.getRangeMax(),this.translateValue=(a/100*this.rangeMax-this.rangeMax/2).toFixed(0),this.oldTranslateValue!==this.translateValue&&(this.oldPercentage=a,this.oldTranslateValue=this.translateValue,!0))}},{key:"animate",value:function(){var a,b=0,c=0;(this.settings.orientation.includes("left")||this.settings.orientation.includes("right"))&&(c="".concat(this.settings.orientation.includes("left")?-1*this.translateValue:this.translateValue,"px")),(this.settings.orientation.includes("up")||this.settings.orientation.includes("down"))&&(b="".concat(this.settings.orientation.includes("up")?-1*this.translateValue:this.translateValue,"px")),a=!1===this.settings.overflow?"translate3d(".concat(c,", ").concat(b,", 0) scale(").concat(this.settings.scale,")"):"translate3d(".concat(c,", ").concat(b,", 0)"),this.element.style[r]=a}}])&&c(d.prototype,f),g&&c(d,g),b}(),f=!1,z=[],A=function(){function a(b,c){if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),b&&y()){if(this.elements=s(b),this.defaults={delay:0,orientation:"up",scale:1.3,overflow:!1,transition:"cubic-bezier(0,0,0,1)",customContainer:!1,customWrapper:!1,maxTransition:0},this.settings=Object.assign(this.defaults,c),this.settings.customContainer){var d=m(s(this.settings.customContainer),1);this.customContainer=d[0]}this.lastPosition=-1,this.resizeIsDone=this.resizeIsDone.bind(this),this.refresh=this.refresh.bind(this),this.proceedRequestAnimationFrame=this.proceedRequestAnimationFrame.bind(this),this.init()}}var b,c,d;return b=a,(c=[{key:"init",value:function(){var a=this;i.setViewportAll(this.customContainer),z=[].concat(h(this.elements.map(function(b){return new l(b,a.settings)})),h(z)),f||(this.proceedRequestAnimationFrame(),window.addEventListener("resize",this.resizeIsDone),f=!0)}},{key:"resizeIsDone",value:function(){clearTimeout(t),t=setTimeout(this.refresh,200)}},{key:"proceedRequestAnimationFrame",value:function(){var a=this;i.setViewportTop(this.customContainer),this.lastPosition===i.positions.top?v=window.requestAnimationFrame(this.proceedRequestAnimationFrame):(i.setViewportBottom(),z.forEach(function(b){a.proceedElement(b)}),v=window.requestAnimationFrame(this.proceedRequestAnimationFrame),this.lastPosition=i.positions.top)}},{key:"proceedElement",value:function(a){(this.customContainer?a.checkIfVisible():a.isVisible)&&a.getTranslateValue()&&a.animate()}},{key:"refresh",value:function(){i.setViewportAll(this.customContainer),z.forEach(function(a){a.getElementOffset(),a.getRangeMax()}),this.lastPosition=-1}},{key:"destroy",value:function(){var a=this,b=[];z=z.filter(function(c){return a.elements.includes(c.element)?(b.push(c),!1):c}),b.forEach(function(b){b.unSetStyle(),!1===a.settings.overflow&&b.unWrapElement()}),z.length||(window.cancelAnimationFrame(v),window.removeEventListener("resize",this.refresh))}}])&&u(b.prototype,c),d&&u(b,d),a}()}]).default});